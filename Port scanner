import socket
import threading
from datetime import datetime

# Get user input to target:
target = input("Enter the target ip: ")
start_port = int(input("Enter starting range of port: "))
end_port = int(input("Enter end of port: "))

#Start time set:
print(f"\nScanning target {target} from {start_port - end_port}.. ")
start_time = datetime.now()

#Lock to synchronize thread output
print_lock = threading.Lock()

#connecting our ip and port to scan:
try:
    for port in range(start_port, end_port + 1):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        socket.setdefaulttimeout(1)

        result = sock.connect_ex((target, port))
        if result == 0:
            print(f"\n Port {port} is OPEN")
        sock.close()

#excepting errors:
except KeyboardInterrupt:
    print("\nScan interrupted by user.")
except socket.gaierror:
    print("\nHostname could not be resolved.")
except socket.error:
    print("\nCould not connect to server.")

try:

#Set end time:
end_time = datetime.now()
print(f"\nScan Completed in {start_time - end_time}..")

